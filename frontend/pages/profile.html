<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Page</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

    <h2>Welcome, {{ user.username }}</h2>
    <p>Email: <span id="user-email">{{ user.email }}</span></p>
    <p>Role: {{ user.role }}</p>
    <p>Status: {{ user.user_status }}</p>

    <h3>Update Email</h3>
    <input type="hidden" id="user-id" value="{{ user.id }}">
    <input type="email" id="new-email" placeholder="Enter new email">
    <button onclick="updateEmail()">Update Email</button>
    <p id="email-status"></p>

    <h3>Change Password</h3>
    <input type="password" id="old-password" placeholder="Enter old password">
    <input type="password" id="new-password" placeholder="Enter new password">
    <button onclick="updatePassword()">Change Password</button>
    <p id="password-status"></p>

    <script>
        function updateEmail() {
            var userId = $("#user-id").val();
            var newEmail = $("#new-email").val();

            $.post("/update_email", { user_id: userId, new_email: newEmail }, function(data) {
                $("#email-status").text(data.message);
                if (data.status === "success") {
                    $("#user-email").text(newEmail);
                }
            });
        }
    </script>

</body>
</html>
